# Changelog

### Changes 18.07.18

- **Added port property to publish_docker.sh**\
    The script currently uses only port 22 for SSH and SCP commands to setup docker containers on the remote server
    GENI resources use different ports for these protocols therefore it is necessary to specify them also in the publish script. If no port is specified 22 will be used.

- **Added setup function to publish_docker.sh**\
    GENI resources do not have any tools installed to run docker containers on them. The setup function in the script install all resources needed for a docker installation and installs docker after that.
    Finally the script modifies access rights for docker execution so no `sudo` command is needed.

- **Added Docker registry**\
    If the property `registry_user` is specified in the docker-swarm.cfg file, the publish_docker script will use this username to authenticate agains the DOcker registry.
    This registry is used to build the image locally and then push the build image to it so it does not need to build the image on every host if running in distributed mode.

- **Added generate_distributed_files.py**\
    This script aids in faster GENI and Docker swarm deployment. It can be passed a number to specify how many hosts should be included in a distributed simulation and it will output a GENI RSpec file and Docker swarm configuration for the simulation.
    ```
        $ python generate_distributed_files.py <number-of-hosts> <output-folder>
    ```

- **Added manifest_to_config.py**\
    This script aids in retrieving the generated GENI resources IPv4 addresses by parsing the given XML script downloaded from GENI (Manifest XML) and outputting the IP addresses in the format that the docker-swarm.cfg file expects.
    ```
        $ python manifest_to_config.py <path-to-manifest>
    ```

- **Added gather_logs.sh**\
    Simple script that downloads the logs folder generated by the simulation as a zip file
    The output path of the downloaded logs can be specified in the configuration file with the key `outpt_dir`.

- **Added Data Rate Estimator**\
    The estimator is a singleton object that holds a list of hosts (ActorRefs) of which the data rate to each single host is measured in a specific interval. The interval can be modified in the configuration files of the project with the key `constants.data-rate-refresh-interval`.
    Futhermore, the request of data rates, done by the transition strategies, is not blocking anymore.

- **iPerf update to version 3**\
    After experiencing some severe issue with iPerf version 2, the project is now using iPerf3 to periodically measure data rates.
